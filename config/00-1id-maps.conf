# 1id.com -- HTTP-level map for Accept-header content negotiation
# Loaded at http{} level via conf.d/*.conf include in nginx.conf
# Routes root path (/) to different content based on Accept header:
#   application/json -> /.well-known/1id.json (machine metadata)
#   text/markdown    -> /enroll.md            (agent enrollment instructions)
#   default          -> /index.html           (human homepage)

map $http_accept $oneid_root_content_negotiation_target {
    ~application/json  /.well-known/1id.json;
    ~text/markdown     /enroll.md;
    default            /index.html;
}
